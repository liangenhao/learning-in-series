---
title: 01-工作流与Activiti
date: 2019-05-26
categories: Activiti
tags: [Activiti]
---

## 什么是工作流

工作流(Workflow)，就是通过计算机对业务流程自动化执行管理。

### 传统业务流程管理

在没有专门的工作流引擎之前，为了实现流程控制，通常的做法就是采用状态字段的值来跟踪流程的变化情况。 这样不用角色的用户，通过状态字段的取值来决定记录是否显示。

#### 工作流引擎的优势

使用工作流的方式实现流程管理优势在于与状态字段无关，它始终都是从业务流程图中不断读取下一个节点，当业务更新时，只要更新业务流程图，程序代码无需改动。

### 工作流引擎实现原理

大体实现步骤：

1. 先将流程图画好。
2. 将流程图中每个节点的数据读取并放入表中。
3. 从表中读取第一条记录，处理并删除。

如何实现这个自动化的过程：

1. 业务流程图要规范化，要遵循一套标准。
2. 我们如何解析这个业务流程图：流程图本质上是一个xml文件，便于解析。
3. 读取业务流程图的过程就是解析xml文件的过程。
4. 读取一个业务流程图中的节点，就相当于解析一个xml节点。进一步将数据插入到数据库表中，形成一条记录。
5. 将所有节点都读取并存入数据库表中。
6. 后面只要读取数据库中的记录，读一条记录就相当于读一个流程图的节点。
7. 业务流程的推进，就转化为读表中的数据，并且处理数据。结束时，这条数据就可以删除。

## Activiti

`Activiti`是一个工作流引擎， activiti 可以将业务系统中复杂的业务流程抽取出来，使用专门的建模语言(BPMN2.0)进行定义，业务系统按照预先定义的流程进行执行，实现了业务系统的业务流程由 activiti 进行管理，减少业务系统由于流程变更进行系统升级改造的工作量，从而提高系统的健壮性，同时也减少了系统开发维护成本。

### BPM

BPM(Business Process Management)，即业务流程管理，是一种以规范化的构造端到端的卓越业务流程为中心，以持续的提高组织业务绩效为目的系统化方法。

### BPMN

BPMN(Business Process Model And Notation)- 业务流程模型和符号是由BPMI(Business Process Management Initiative)开发的一套标准的业务流程建模符号，使用 BPMN 提供的符号可以创建业务流程。

BPMN 是目前被各 BPM 厂商广泛接受的 BPM 标准。**Activiti 就是使用 BPMN 2.0 进行流程建模**、流程执行管理，它包括很多的建模符号：

- Event 用一个圆圈表示，它是流程中运行过程中发生的事情。
- 活动用圆角矩形表示，一个流程由一个活动或多个活动组成。

### Activiti流程设计插件

- `Eclipse`：

  ```
   Name: Activiti BPMN 2.0 designer 
   Location: http://activiti.org/designer/update/
  ```

- `Idea`：`actiBPM`

### Activiti支持的数据库

h2、mysql、oracle、postgres、db2、mssql



